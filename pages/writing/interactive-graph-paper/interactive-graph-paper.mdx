---
title: Interactive Graph Paper
date: "2023-12-02"
category: Code
description: Playing with grid size, color, masking, and opacity
slug: interactive-graph-paper
---

import BlogPostLayout from "../../../components/layouts/BlogPostLayout";
export default ({ children }) => (
  <BlogPostLayout meta={meta}>{children}</BlogPostLayout>
);

import InteractiveGraphPaper from "../../../components/InteractiveGraphPaper";
import GraphPaper from "../../../components/ui/GraphPaper";

<InteractiveGraphPaper />

## Why Make This?

Recently I came across a [landing page](https://vaul.emilkowal.ski/) by [Emil Kowalski](https://emilkowal.ski/). The hero section has subtle gridlines that gradually fade out. I really like how this pattern gives a sense of technical precision and engineering.

Whenever I see a grid pattern like this, I'm alway curious to learn how it was implemented.

There are so many variations. You can do a square grid, a dot grid, or a double grid (also called "engineering paper"). You even can create guidelines that align to content on the page.

<div style={{display: "flex"}}>
  <div style={{position: "relative", height: 200, width: "33%", margin: "40px 0 24px 0"}}>
  <GraphPaper 
    glowOpacity={0} 
    decorationOpacity={0} 
    maskCoverage={1000}
    verticalLines={false}
    dots={true}
    />  
  </div>
  <div style={{position: "relative", height: 200, width: "33%", margin: "40px 0 24px 0"}}>
  <GraphPaper 
    glowOpacity={0} 
    decorationOpacity={0} 
    maskCoverage={1000}
    horizontalLines={true}
    />  
  </div>
  <div style={{position: "relative", height: 200, width: "33%", margin: "40px 0 24px 0"}}>
  <GraphPaper 
    glowOpacity={0} 
    decorationOpacity={0} 
    maskCoverage={1000}
    horizontalLines={true}
    innerGrid={true}
    />  
  </div>
</div>

I made this interactive grid because it felt like a fun way to learn how to create these various patterns and also to practice my React skills, specifically what I've learned about [state and controlled inputs](https://react.dev/reference/react-dom/components/input#controlling-an-input-with-a-state-variable).

I was inspired by [Josh Comeau](https://www.joshwcomeau.com) who writes [interactive blog posts](https://www.joshwcomeau.com/css/interactive-guide-to-grid/) and makes tools like this [CSS Shadow Palette Generator](https://www.joshwcomeau.com/shadow-palette/). I also learned React mostly from Josh's course, [The Joy of React](https://www.joyofreact.com/), which I highly recommend.

## Repeating Shapes

To create a grid pattern you draw a shape in a small bit of space. Then you repeat it across the width and height of a parent container.

To create gridlines, you can draw and repeat a line or an L shape.
 <div style={{position: "relative", height: 100, width: 100, margin: "40px 0 24px 0"}}>
  <GraphPaper 
    glowOpacity={0} 
    decorationOpacity={0} 
    maskCoverage={1000}
    horizontalLines={true}
    cellSize={100}
    />  
  </div>

To create a dot grid, you can draw and repeat a small circle.

<div style={{display: "flex"}}>
  <div style={{position: "relative", height: 100, width: 100, margin: "40px 0 24px 0"}}>
  <GraphPaper 
    glowOpacity={0} 
    decorationOpacity={0} 
    maskCoverage={1000}
    verticalLines={false}
    dots={true}
    cellSize={100}
    />  
  </div>
 
 
</div>


## How To Draw and Repeat Shapes

It turns out there are at least three ways to draw a shape and repeat it across the width and height of a parent container on a website.

1. Background Image
2. CSS Grid
3. SVG Patterns

### Using a Background Image

In CSS, if you set a `background-image` on an element, the image will be repeated so it covers the entire element, giving a tiling effect. [[source](https://developer.mozilla.org/en-US/docs/Web/CSS/background-image)]

```css
.element {
  background-image: url("some-image.png");
}
/* some-image.png is tiled across the element */
```

By setting the `background-size` property, you can define the size of the image or tile that will be repeated. The smaller the tile, the denser the grid will be. [[source](https://developer.mozilla.org/en-US/docs/Web/CSS/background-size)]

```css
.element {
  background-size: 200px 100px; 
}
/* sets the width and height of the image or tile */
```

Instead of an image url, you can use the `linear-gradient()` function to create a line or the `radial-gradient()` function to create a small circle.

Linear and radial gradients are special kind of images that consist of *"a progressive transition between two or more colors."* [[source](https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient#linear-color-stop), [source](https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/radial-gradient)]

The trick for creating a line or a dot is to make the outer color transparent and then place the color stops next to each other to create a sharp edge where one color transitions to the next color.

```css
/* Create a 1px wide vertical black line on the right edge 
of a 16px sqaure */

.element {
  background-image: linear-gradient(
    to-left, /* direction of the gradient */
    black, /*  color starts at the right edge */
    black 1px, /* color ends after 1px */
    transparent 1px); /* transparency starts where color ends 
    and fills the rest of the image */

  background-size: 16px 16px; /* size of the image or tile */
}
```
Similarly, using radial gradient, you can create a circle with a sharp edge by making the outer color transparent and then placing the color stops next to each other.


```css
/* Create a cicle of radius --dot-size and color --dot-color, 
placed at the center of a --cell-size square */

background-image: radial-gradient(
    circle at center,
    var(--dot-color),
    var(--dot-color) var(--dot-size),
    transparent var(--grid-dot-size)
  );
background-size: var(--cell-size) var(--cell-size);
```

### Using CSS Grid

Create a grid of N rows and N columns. Add empty divs to the grid and apply a border. The downside of this approach is you need NxN empty divs to apply the border to. If the number of columns or rows changes, the number of empty divs has to change too

Benefit is you can mix dense gridlines with widely spaced and cut out sections. Can also actaully precisely align content with the lines, since you make both the conten and the line created on the same grid.

Example. Stripe Sessions. Vercel AI.

### Using SVG Patterns

defs, pattern id, rect url=id

shapes to draw in pattern

`<line>`

`<path>` with the d attribute

 d="M H V Z"`</path>`

`<circle>`

and whatever else you can image (reference dude's site on svg path drawing)

This is the approach I took.

## Layering Patterns

Layer approach rather than one big pattern, so SVG was the best way to do that, transparent, composable, easier to specific exact location

### Horizontal Lines

line

### Vertical Lines

line

### Inner Grid

Two lines 1/3 size

### Dots

circle 1/20th size of cell

## Adding Visual Effects

In addition to the gridlines, Emil's landing page also has subtle details like a radial gradient and a few filled in squared that take the visual design to the next level.

I wanted to

### Masking

Radial gradient

/* MASK */
  --mask-rgb: 255, 255, 255;
  mask-image: radial-gradient(
    100% var(--mask-coverage) at top center,
    white,
    rgba(var(--mask-rgb), 0.5),
    rgba(var(--mask-rgb), 0.25),
    rgba(var(--mask-rgb), 0.1),
    rgba(var(--mask-rgb), 0.05),
    transparent
  );

### Glow 

Radial gradient

### Decorations

Square

path to form a square

Circle

circle


## Parameterizing Values

fun way to learn how it works

fun to play with and see what you can create

Controlled inputs

Switch

Slider

Color Picker

CSS variables to avoid prop drilling and to makes code easier to read and understand

## Light and Dark Mode

colors for site background, svg fills and strokes, and inputs are in my global color variables, with both light and dark definitions.
